# react-router è·¯ç”±è·³è½¬ä¼ å‚çš„ä¸‰ç§æ–¹å¼

## 1. paramsä¼ å‚

ä¼˜ç‚¹ï¼šåˆ·æ–°é¡µé¢ï¼Œå‚æ•°ä¸ä¸¢å¤±

ç¼ºç‚¹ï¼š1.åªèƒ½ä¼ å­—ç¬¦ä¸²ï¼Œä¼ å€¼è¿‡å¤šurlä¼šå˜å¾—å¾ˆé•¿ 2. å‚æ•°å¿…é¡»åœ¨è·¯ç”±ä¸Šé…ç½®

#### è·¯ç”±é…ç½®

```js
js
å¤åˆ¶ä»£ç { path: '/detail/:id/:name', component: Detail },
```

#### è·¯ç”±è·³è½¬ä¸è·å–è·¯ç”±å‚æ•°

```js
jså¤åˆ¶ä»£ç import { useHistory,useParams } from 'react-router-dom';
const history = useHistory();
// è·³è½¬è·¯ç”±   åœ°å€æ ï¼š/detail/2/zora
history.push('/detail/2/zora')
// è·å–è·¯ç”±å‚æ•°
const params = useParams()  
console.log(params) // {id: "2",name:"zora"}
```

## 2. searchä¼ å‚

ä¼˜ç‚¹ï¼šåˆ·æ–°é¡µé¢ï¼Œå‚æ•°ä¸ä¸¢å¤±

ç¼ºç‚¹ï¼šåªèƒ½ä¼ å­—ç¬¦ä¸²ï¼Œä¼ å€¼è¿‡å¤šurlä¼šå˜å¾—å¾ˆé•¿ï¼Œè·å–å‚æ•°éœ€è¦è‡ªå®šä¹‰hooks

#### è·¯ç”±é…ç½®

```js
js
å¤åˆ¶ä»£ç { path: '/detail', component: Detail },
```

#### è·¯ç”±è·³è½¬ä¸è·å–è·¯ç”±å‚æ•°

```js
jså¤åˆ¶ä»£ç import { useHistory } from 'react-router-dom';
const history = useHistory();
// è·¯ç”±è·³è½¬  åœ°å€æ ï¼š/detail?id=2
history.push('/detail?id=2')  
// æˆ–è€…
history.push({pathname:'/detail',search:'?id=2'})

/**
* è‡ªå®šä¹‰hooksç”¨äºè·å–è·¯ç”±å‚æ•°
* IE11åŠä»¥ä¸‹æµè§ˆå™¨ ä¸æ”¯æŒæµè§ˆå™¨å†…ç½®çš„URLSearchParams API
**/
function useQuery() {
  return new URLSearchParams(useLocation().search);
}
const query = useQuery()
const id = query.get('id') //2

/**
    è‡ªå®šä¹‰hooks
*/
import { useLocation } from 'react-router-dom';
import qs from 'query-string';

export function useQuery<T = any>(): T {
  const { search } = useLocation();
  return (qs.parse(search) as unknown) as T;
}
const query = useQuery<IRouteQuery>();
const {id} = query
```

## 3. stateä¼ å‚ğŸ™Œ

ä¼˜ç‚¹ï¼šå¯ä»¥ä¼ å¯¹è±¡

ç¼ºç‚¹ï¼š `<HashRouter>`åˆ·æ–°é¡µé¢ï¼Œå‚æ•°ä¸¢å¤±

#### è·¯ç”±é…ç½®

```js
js
å¤åˆ¶ä»£ç { path: '/detail', component: Detail },
```

#### è·¯ç”±è·³è½¬ä¸è·å–è·¯ç”±å‚æ•°

```js
jså¤åˆ¶ä»£ç import { useHistory,useLocation } from 'react-router-dom';
const history = useHistory();
const item = {id:1,name:"zora"}
// è·¯ç”±è·³è½¬
history.push(`/user/role/detail`, { id: item });
// å‚æ•°è·å–
const {state} = useLocation()
console.log(state)  // {id:1,name:"zora"}
```

::: note

`<HashRouter>` ä¸æ”¯æŒ `location.key` ä¸ `location.state`ï¼Œ`<HashRouter>`é€šè¿‡`state`ä¼ é€’å‚æ•°ï¼Œåˆ·æ–°é¡µé¢åå‚æ•°ä¸¢å¤±ï¼Œå®˜æ–¹å»ºè®®ä½¿ç”¨`<BrowserRouter>`ï¼Œ`<BrowserRouter>`é¡µé¢åˆ·æ–°å‚æ•°ä¹Ÿä¸ä¼šä¸¢å¤±ã€‚

:::