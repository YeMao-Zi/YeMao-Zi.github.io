---
title: æ„å»ºä¸€ä¸ªåŸºç¡€åº”ç”¨
date: 2022-10-28 15:09:42
permalink: /pages/5f940c/
categories:
  - ã€ŠElectronã€‹ç¬”è®°
tags:
  - 
author: 
  name: å¤œçŒ«å­
  link: https://github.com/yemao-zi
titleTag: 
---
## ç¼–å†™ç½‘é¡µå¹¶è£…è½½åˆ° BrowserWindow

### 1.ç¼–å†™é¡µé¢

åœ¨ Electron ä¸­ï¼Œæ¯ä¸ªçª—å£å±•ç¤ºä¸€ä¸ªé¡µé¢ï¼Œåè€…å¯ä»¥æ¥è‡ªæœ¬åœ°çš„ HTMLï¼Œä¹Ÿå¯ä»¥æ¥è‡ªè¿œç¨‹ URLã€‚ä»¥æœ¬åœ°ä¸ºä¾‹ï¼Œ åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª `index.html` æ–‡ä»¶ï¼Œä½œä¸ºå±•ç¤ºé¡µé¢ã€‚å¦‚

```html
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP -->
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    />
    <meta
      http-equiv="X-Content-Security-Policy"
      content="default-src 'self'; script-src 'self'"
    />
    <title>Hello from Electron renderer!</title>
  </head>
  <body>
    <h1>Hello from Electron renderer!</h1>
    <p>ğŸ‘‹</p>
  </body>
</html>
```

### 2.è£…è½½é¡µé¢

åœ¨ index.js ä¸­ç¼–å†™ä»¥ä¸‹ä»£ç 

```js
// å¯¼å…¥æ¨¡å— app å’Œ BrowserWindow
// app:æ§åˆ¶åº”ç”¨äº‹ä»¶çš„ç”Ÿå‘½å‘¨æœŸ
// BrowserWindow:è´Ÿè´£åˆ›å»ºå’Œç®¡ç†åº”ç”¨çš„çª—å£
const { app, BrowserWindow } = require('electron')

// å°†é¡µé¢åŠ è½½åˆ°æ–°çš„ BrowserWindow å®ä¾‹ä¸­
const createWindow = () => {
  const win = new BrowserWindow({
    width: 800,
    height: 600,
  })
  win.loadFile('index.html')
}

// åˆ›å»ºå®ä¾‹
// åœ¨ app æ¨¡ç»„çš„ ready äº‹ä»¶èƒ½è§¦å‘åæ‰èƒ½åˆ›å»º BrowserWindows å®ä¾‹
app.whenReady().then(() => {
  createWindow()
})
```

## å¯é€‰ï¼šä½¿ç”¨ vscode è¿›è¡Œè°ƒè¯•

å¦‚æœå¸Œæœ›ä½¿ç”¨ VS Code è°ƒè¯•ç¨‹åºï¼Œåˆ™éœ€è¦è®© VS Code ç›‘å¬ä¸»è¿›ç¨‹ (main process) å’Œæ¸²æŸ“å™¨è¿›ç¨‹ (renderer process) ã€‚ ä¸‹é¢æä¾›äº†ä¸€ä¸ªç®€å•çš„é…ç½®æ–‡ä»¶ã€‚ 1.åœ¨æ ¹ç›®å½•æ–°å»ºä¸€ä¸ª `.vscode` æ–‡ä»¶å¤¹ï¼Œ2.ç„¶ååœ¨å…¶ä¸­æ–°å»ºä¸€ä¸ª launch.json é…ç½®æ–‡ä»¶å¹¶å¡«å†™å¦‚ä¸‹å†…å®¹ã€‚

```json
// .vscode/launch.json
{
  "version": "0.2.0",
  "compounds": [
    {
      "name": "Main + renderer",
      "configurations": ["Main", "Renderer"],
      "stopAll": true
    }
  ],
  "configurations": [
    {
      "name": "Renderer",
      "port": 9222,
      "request": "attach",
      "type": "chrome",
      "webRoot": "${workspaceFolder}"
    },
    {
      "name": "Main",
      "type": "node",
      "request": "launch",
      "cwd": "${workspaceFolder}",
      "runtimeExecutable": "${workspaceFolder}/node_modules/.bin/electron",
      "windows": {
        "runtimeExecutable": "${workspaceFolder}/node_modules/.bin/electron.cmd"
      },
      "args": [".", "--remote-debugging-port=9222"],
      "outputCapture": "std",
      "console": "integratedTerminal"
    }
  ]
}
```

ä¸Šæ–‡ä¸­åœ¨ `launch.json` æ‰€åšçš„å…¶å®æ˜¯åˆ›å»ºä¸‰ä¸ªé…ç½®é¡¹ï¼š

- `Main` ç”¨æ¥è¿è¡Œä¸»ç¨‹åºï¼Œå¹¶ä¸”æš´éœ²å‡º 9222 ç«¯å£ç”¨äºè¿œç¨‹è°ƒè¯• (`--remote-debugging-port=9222`) ã€‚ æˆ‘ä»¬å°†æŠŠè°ƒè¯•å™¨ç»‘å®šåˆ°é‚£ä¸ªç«¯å£æ¥è°ƒè¯• `renderer` ã€‚ å› ä¸ºä¸»è¿›ç¨‹æ˜¯ Node.js è¿›ç¨‹ï¼Œç±»å‹è¢«è®¾ç½®ä¸º `node`ã€‚
- `Renderer` ç”¨æ¥è°ƒè¯•æ¸²æŸ“å™¨è¿›ç¨‹ã€‚ å› ä¸ºåè€…æ˜¯ç”±ä¸»è¿›ç¨‹åˆ›å»ºçš„ï¼Œæˆ‘ä»¬è¦æŠŠå®ƒ â€œç»‘å®šâ€ åˆ°ä¸»è¿›ç¨‹ä¸Š ()`"request": "attach"`ï¼Œè€Œä¸æ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ã€‚ æ¸²æŸ“å™¨æ˜¯ web è¿›ç¨‹ï¼Œå› æ­¤è¦é€‰æ‹© `chrome` è°ƒè¯•å™¨ã€‚
- `Main + renderer` æ˜¯ä¸€ä¸ª [å¤åˆä»»åŠ¡](https://code.visualstudio.com/Docs/editor/tasks#_compound-tasks)ï¼Œå¯åŒæ—¶æ‰§è¡Œå‰ä¸¤ä¸ªä»»åŠ¡ã€‚

