---
title: antDesignVue
date: 2023-07-20 17:41:33
permalink: /pages/825181/
categories:
  - 技术
  - UI库文章
tags:
  - 
author: 
  name: 夜猫子
  link: https://github.com/yemao-zi
titleTag: 
---

## 封装table分页

```js
import { ref, reactive } from 'vue'

export const usePagination = (options) => {
  const { searchParams, loadData, pageOptions } = options
  const list = ref([])

  const pagination = reactive({
    total: 0,
    current: 1,
    showTotal: (total) => `共 ${total} 条记录`,
    pageSize: 10,
    pageSizeOptions: ['10', '20', '30', '40', '50'],
    onChange,
    ...pageOptions
  })
  async function onChange(current, pageSize, params = searchParams) {
    pagination.current = current
    pagination.pageSize = pageSize
    if (!loadData) return
    let newSearchParams
    if (typeof params === 'function') {
      newSearchParams = params(pagination)
    } else {
      newSearchParams = params
    }
    const { data = {} } = await loadData({
      curPage: current,
      pageSize,
      ...newSearchParams
    })
    const { total, records = [] } = data
    pagination.total = total
    list.value = records
  }
  onChange(pagination.current, pagination.pageSize, searchParams)
  const search = (params = searchParams) => {
    onChange(pagination.current, pagination.pageSize, params)
  }
  return [pagination, list, search]
}

```

