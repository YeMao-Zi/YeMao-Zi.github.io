(window.webpackJsonp=window.webpackJsonp||[]).push([[346],{720:function(s,t,a){"use strict";a.r(t);var n=a(5),r=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"表与表之间的关系关联"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#表与表之间的关系关联"}},[s._v("#")]),s._v(" 表与表之间的关系关联")]),s._v(" "),t("p",[s._v("数据库中会有很多的表，分别存储不同的信息，比如学生表存学生的信息、老师表存老师的信息，班级表存班级的信息。")]),s._v(" "),t("p",[s._v("这些表之间不是孤立的，有着一定的关系。")]),s._v(" "),t("p",[s._v("比如班级和学生之间是一对多的关系，也就是一个班级可以有多个学生。")]),s._v(" "),t("p",[s._v("班级和老师之间是多对多的关系，也就是一个班级可以有多个老师，一个老师也可以教多个班级。")]),s._v(" "),t("p",[s._v("如果存储一对一、一对多、多对多这些关系呢？")]),s._v(" "),t("p",[s._v("这就涉及到外键了。")]),s._v(" "),t("h2",{attrs:{id:"比如一对一的关系-一个用户只能有一个身份证。"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#比如一对一的关系-一个用户只能有一个身份证。"}},[s._v("#")]),s._v(" 比如一对一的关系，一个用户只能有一个身份证。")]),s._v(" "),t("p",[s._v("这样两个表，分别存储用户信息，还有身份证信息：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/vCiWauJfzTDxUNM.png",alt:""}})]),s._v(" "),t("p",[s._v("它们之间是一对一的关系，这时就可以用外键来表示。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/rJWfxDE3k9sPytv.png",alt:""}})]),s._v(" "),t("p",[s._v("user 表的主键是 id、可以通过 id 来唯一标识一个 user。")]),s._v(" "),t("p",[s._v("那 id_card 想查找 user，自然也是通过 id 来查找，多一个列来存储 user id 就可以实现这种一对一的关联。")]),s._v(" "),t("p",[s._v("这个 user_id 的列就是外键。")]),s._v(" "),t("p",[s._v("user 表叫主表，使用外键引用它的 id_card 表是从表。")]),s._v(" "),t("p",[s._v("我们建个表来试试看：")]),s._v(" "),t("p",[s._v("选中 hello-mysql 数据库，点击建表按钮：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/i7GzNoVsIDf2KCA.png",alt:""}})]),s._v(" "),t("p",[s._v("分别添加 id、name 列：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/LesjnClvGRyhWgz.png",alt:"image.png"}})]),s._v(" "),t("p",[s._v("点击 apply，建表 sql 如下：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/2RHpidjBrnOa98G.png",alt:""}})]),s._v(" "),t("p",[s._v("你也可以直接用这个 sql 来建表：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("hello-mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'id'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("45")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'名字'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("p",[s._v("然后再建个 id_card 表：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/rbt9ZTBu24JIAD1.png",alt:""}})]),s._v(" "),t("p",[s._v("id 为 INT 类型，设置 primary key、not null 的约束，然后设置 auto increment。")]),s._v(" "),t("p",[s._v("card_name 为 VARCHAR(45) 类型，设置 not null 的约束")]),s._v(" "),t("p",[s._v("user_id 为 INT 类型。")]),s._v(" "),t("p",[s._v("然后添加外键：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/xPnLTDpXOf3Y5hj.png",alt:""}})]),s._v(" "),t("p",[s._v("指定外键 user_id 关联 user 表的 id。")]),s._v(" "),t("p",[s._v("这里还要选择主表数据 update 或者 delete 的时候，从表怎么办：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/MEp6IHfi1nQgLbD.png",alt:""}})]),s._v(" "),t("p",[s._v("我们先用默认的。")]),s._v(" "),t("p",[s._v("点击 apply，生成的建表 sql 是这样的：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/RNd31ZMXEPaf5yr.png",alt:""}})]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id_card"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'id'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("card_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("varchar")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("45")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("NOT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'身份证号'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DEFAULT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("NULL")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'用户 id'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INDEX")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("card_id_idx"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CONSTRAINT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOREIGN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("REFERENCES")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CHARSET")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8mb4\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[t("strong",[s._v("这些建表 sql 的语法了解即可，一般不会自己写。")])]),s._v(" "),t("p",[s._v("前面的三行都比较好理解，就是指定每一列的类型、约束、注释。")]),s._v(" "),t("p",[s._v("PRIMARY KEY 是指定 id 为主键。")]),s._v(" "),t("p",[s._v("INDEX 是建立索引，索引名是 card_id_idex，这个是用于加速 user_id 的访问的。")]),s._v(" "),t("p",[s._v("CONSTRINT user_id FOREIGN KEY 是给 user_id 添加一个外键约束，然后 user_id REFERENCES user id 则是指定 user_id 引用这 user 表的 id 列。")]),s._v(" "),t("p",[s._v("然后就可以看到 user 和 id_card 表了：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/ZjyuMm2W95rLfs4.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/AE67hNZdywvkxSj.png",alt:""}})]),s._v(" "),t("p",[s._v("我们插入几条数据：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("user"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token identifier"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")]),s._v("name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'张三'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'李四'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'王五'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'赵六'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'孙七'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'周八'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'吴九'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'郑十'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'钱十一'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'陈十二'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/FHr85gSmepwDAZs.png",alt:""}})]),s._v(" "),t("p",[s._v("查询一下：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/ZX1pHjUObkDlKGi.png",alt:""}})]),s._v(" "),t("p",[s._v("用户表数据成功插入了。")]),s._v(" "),t("p",[s._v("再插入 id_card 表的数据：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" id_card "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("card_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'110101199001011234'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'310101199002022345'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'440101199003033456'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'440301199004044567'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'510101199005055678'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'330101199006066789'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'320101199007077890'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'500101199008088901'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'420101199009099012'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'610101199010101023'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/MHxX5ldGwSeUOso.png",alt:""}})]),s._v(" "),t("p",[s._v("查询一下：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" id_card"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/zXmkQcWPDhLY8Te.png",alt:""}})]),s._v(" "),t("p",[s._v("这样，一对一关系的数据就插入成功了。")]),s._v(" "),t("p",[s._v("那怎么关联查出来呢？")]),s._v(" "),t("p",[s._v("这样：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" id_card "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" id_card"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这里用到了 JOIN ON，也就是连接 user 和 id_card 表，关联方式是 user.id = id_card.user_id，也就是 id_card 表中的外键关联 user 表的主键。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/2M4jTCc6PNhb1fa.png",alt:""}})]),s._v(" "),t("p",[s._v("点击左上角按钮，新建一条 sql：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/LDs9N54BqcmnOJX.png",alt:""}})]),s._v(" "),t("p",[s._v("查询的结果是这样的：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/EwOWld7uxRYiXKJ.png",alt:""}})]),s._v(" "),t("p",[s._v("这里的两个 id 分别是 user 和 card 的 id，而且后面的 user_id 也没必要展示。")]),s._v(" "),t("p",[s._v("我们改下 sql：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id_card"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" card_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" card_name\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" id_card "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" id_card"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("指定显示的列，并给 id_card 表的 id 起个 card_id 的别名。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/BhDV37MKZPigE5Q.png",alt:""}})]),s._v(" "),t("p",[s._v("这就是多表关联查询，语法是 JOIN ON。")]),s._v(" "),t("p",[s._v("有同学可能问了，那如果 id_card 表里有的没有关联 user 呢？")]),s._v(" "),t("p",[s._v("比如这样：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/wQ3MAvNp6G4UioT.png",alt:""}})]),s._v(" "),t("p",[s._v("选中单元格，点击 delete 就可以把它置为 null。")]),s._v(" "),t("p",[s._v("我们把 id_card 表的最后两条记录的 user_id 删掉，点击 apply。")]),s._v(" "),t("p",[s._v("这时候再执行上面那条 sql 来查询，就可以看到少了两条记录：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/FA7ts8gEBpu3Mom.png",alt:""}})]),s._v(" "),t("p",[s._v("因为 JOIN ON 其实默认是 INNER JOIN ON，相当于这么写：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id_card"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" card_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" card_name\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INNER")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" id_card "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" id_card"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/GwlNIYstePq6Tru.png",alt:""}})]),s._v(" "),t("p",[s._v("INNER JOIN 是只返回两个表中能关联上的数据。")]),s._v(" "),t("p",[s._v("你还可以指定其余 2 种 join 类型：")]),s._v(" "),t("p",[s._v("LEFT JOIN 是额外返回左表中没有关联上的数据。")]),s._v(" "),t("p",[s._v("RIGHT JOIN 是额外返回右表中没有关联上的数据。")]),s._v(" "),t("p",[t("strong",[s._v("在 FROM 后的是左表，JOIN 后的表是右表。")])]),s._v(" "),t("p",[s._v("我们来试一下：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id_card"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" card_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" card_name\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RIGHT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" id_card "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" id_card"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("当使用 RIGHT JOIN 时，会额外返回右表中没有关联的数据：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/E6Pc9ZytOWKVqTH.png",alt:""}})]),s._v(" "),t("p",[s._v("可以看到返回了所有 id_card 的数据，没有关联 user 的记录 user 信息为 null。")]),s._v(" "),t("p",[s._v("当时用 LEFT JOIN 时，正好相反：")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" id_card"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" card_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" card_name\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("LEFT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("JOIN")]),s._v(" id_card "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ON")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("user")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" id_card"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("user_id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/dZmvtsMJ7IlQLgW.png",alt:""}})]),s._v(" "),t("p",[s._v("一般情况，还是用默认的 JOIN ON 比较多，也就是 INNER JOIN。")]),s._v(" "),t("p",[s._v("前面还讲到了删除和更新时的级联操作。")]),s._v(" "),t("p",[s._v("也就是当 user 删除的时候，关联的 id_card 要不要删除？")]),s._v(" "),t("p",[s._v("当 user 的 id 修改的时候，关联的 id_card 要不要改 user_id？")]),s._v(" "),t("p",[s._v("我们之前设置的是默认的 RESTICT：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/F2mylG714LcbdxH.png",alt:""}})]),s._v(" "),t("p",[s._v("其实可选的值有 4 种：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/Sck2TUM4ayK6VmL.png",alt:""}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("CASCADE： 主表主键更新，从表关联记录的外键跟着更新，主表记录删除，从表关联记录删除")])]),s._v(" "),t("li",[t("p",[s._v("SET NULL：主表主键更新或者主表记录删除，从表关联记录的外键设置为 null")])]),s._v(" "),t("li",[t("p",[s._v("RESTRICT：只有没有从表的关联记录时，才允许删除主表记录或者更新主表记录的主键 id")])]),s._v(" "),t("li",[t("p",[s._v("NO ACTION： 同 RESTRICT，只是 sql 标准里分了 4 种，但 mysql 里 NO ACTION 等同于 RESTRICT。")])])]),s._v(" "),t("p",[s._v("这里不理解不要紧，我们试一下：")]),s._v(" "),t("p",[s._v("现在 user 表是这样的：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/ZdrGn8tvSh7Fza3.png",alt:""}})]),s._v(" "),t("p",[s._v("右键选择 delete row：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/hmDlEgtpCbLr5k8.png",alt:""}})]),s._v(" "),t("p",[s._v("这时候会提示你更新失败，因为有外键的约束。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/sS4j1vaBLAWb7HQ.png",alt:""}})]),s._v(" "),t("p",[s._v("点击 revert，回到之前的状态：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/l1GojDQVBNJwUi6.png",alt:""}})]),s._v(" "),t("p",[s._v("然后更新 id 为 11，点击 apply：\n"),t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/4JrBepW8m1uRxKy.png",alt:""}})]),s._v(" "),t("p",[s._v("同样会提示你更新失败，因为有外键的约束：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/NAzLsakmqt2OQ9B.png",alt:""}})]),s._v(" "),t("p",[s._v("这就是 "),t("strong",[s._v("RESTIRCT 和 NO ACTION 的处理逻辑：只要从表有关联记录，就不能更新 id 或者删除记录。")])]),s._v(" "),t("p",[s._v("我们手动把从表记录的关联去掉，也就是删除第一条记录的外键（按 delete 键）：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/RkaUB6hW5DTNYt3.png",alt:""}})]),s._v(" "),t("p",[s._v("点击 apply 应用这次改动。")]),s._v(" "),t("p",[s._v("然后再试下主表的更新：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/D8OQt3eSfYbEJyw.png",alt:""}})]),s._v(" "),t("p",[s._v("这次就更新成功了！")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/sDwlYg7HnOr2S3Z.png",alt:""}})]),s._v(" "),t("p",[s._v("再来试下删除：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/5U4wibcXHYZlhd8.png",alt:""}})]),s._v(" "),t("p",[s._v("同样也成功了：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/18O39YzjgUFkcCx.png",alt:""}})]),s._v(" "),t("p",[s._v("这就是 RESTRICT 或者 NO ACTION，只有当从表没有关联的记录的时候，才能更新主表记录的 id 或者删除它。")]),s._v(" "),t("p",[s._v("我们再来试试 CASCADE：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/ZdzKiVrsuINT19b.png",alt:""}})]),s._v(" "),t("p",[s._v("修改外键级联方式为 CASCADE，点击 apply。")]),s._v(" "),t("p",[s._v("先看一下现在 id_card 表的数据：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/P5BclYL1jvCnKQU.png",alt:""}})]),s._v(" "),t("p",[s._v("把 id 为 2 的 user 的 id 改为 22，点击 apply：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/mR3NYpBjMH4s2VP.png",alt:""}})]),s._v(" "),t("p",[s._v("再看下 id_card 表的数据，你会发现 user_id 跟着改了。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/T96xAUdeanRuCMq.png",alt:""}})]),s._v(" "),t("p",[s._v("然后把 id 为 22 的 user 删除掉，点击 apply：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/JVi6AnTNHdCW2uM.png",alt:""}})]),s._v(" "),t("p",[s._v("再看下 id_card 表会发现那条 user_id 为 22 的记录也没了。")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/twouM9QP2FE4LWC.png",alt:""}})]),s._v(" "),t("p",[s._v("这就是级联方式为 "),t("strong",[s._v("CASCADE 的处理逻辑：主表删除，从表关联记录也级联删除，主表 id 更新，从表关联记录也跟着更新。")])]),s._v(" "),t("p",[s._v("然后再试下 set null：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/m9FQp7htzJk3n6W.png",alt:""}})]),s._v(" "),t("p",[s._v("修改之后点击 apply。")]),s._v(" "),t("p",[s._v("查询下现在的 id_card 表的数据：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/jANmer4YMJZH2lp.png",alt:""}})]),s._v(" "),t("p",[s._v("把 user 表中 id 为 5 的记录 id 改为 55，点击 apply：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/2tpvO6QRUb9NXz4.png",alt:""}})]),s._v(" "),t("p",[s._v("这时候 id_card 中那条记录的外键被置为 null 了：")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2025/06/03/T2vVEhIcL4WJ7Pp.png",alt:""}})]),s._v(" "),t("p",[s._v("这就是 "),t("strong",[s._v("set null 的处理逻辑：主表记录删除或者修改 id，从表关联记录外键置为 null。")])]),s._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("p",[s._v("这节我们学习了一对一的数据表设计，在从表里通过外键来关联主表的主键。")]),s._v(" "),t("p",[s._v("查询的时候需要使用 join on，默认是 inner join 也就是只返回有关联的记录，也可以用 left join、right join 来额外返回没有关联记录的左表或右表的记录。")]),s._v(" "),t("p",[s._v("from 后的是左表，join 后的是右表。")]),s._v(" "),t("p",[s._v("此外，外键还可以设置级联方式，也就是主表修改 id 或者删除的时候，从表怎么做。")]),s._v(" "),t("p",[s._v("有 3 种级联方式：CASCADE（关联删除或更新），SET NULL（关联外键设置为 null），RESTRICT 或者 NO ACTION（没有从表的关联记录才可以删除或更新）")]),s._v(" "),t("p",[s._v("多表的连接是非常常用的操作，下节我们继续学习一对多和多对多的数据表设计。")])])}),[],!1,null,null,null);t.default=r.exports}}]);