(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{575:function(s,t,a){"use strict";a.r(t);var n=a(5),e=Object(n.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"事务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#事务"}},[s._v("#")]),s._v(" 事务")]),s._v(" "),t("p",[s._v("在 MySQL 中，事务（Transaction）是一组逻辑上相关的 SQL 操作，这些操作要么全部成功执行，要么全部不执行。事务提供了原子性（Atomicity）、一致性（Consistency）、隔离性（Isolation）和持久性（Durability），通常被称为 ACID 属性。")]),s._v(" "),t("p",[t("strong",[s._v("基本概念")])]),s._v(" "),t("ol",[t("li",[t("strong",[s._v("原子性（Atomicity）")]),s._v("：事务中的所有操作要么全部完成，要么全部不完成。")]),s._v(" "),t("li",[t("strong",[s._v("一致性（Consistency）")]),s._v("：事务必须使数据库从一个一致状态变换到另一个一致状态。")]),s._v(" "),t("li",[t("strong",[s._v("隔离性（Isolation）")]),s._v("：多个事务并发执行时，一个事务的执行不能被其他事务干扰。")]),s._v(" "),t("li",[t("strong",[s._v("持久性（Durability）")]),s._v("：一旦事务提交，其结果将永久保存在数据库中，即使系统发生故障也不会丢失。")])]),s._v(" "),t("p",[s._v("银行存取款：假如A想要把自己账户上的10万元转到B的账户上，这时就需要先从A账户中扣除10万元，然后再给B账户加上10万元。如果从A账户扣除10万元时发生了错误，会出现什么情况呢？结果可能会导致以下这两种情况。")]),s._v(" "),t("ol",[t("li",[s._v("A账户的10万元没有扣除成功，B账户加上了10万元。")]),s._v(" "),t("li",[s._v("A账户的10万元扣除成功，B账户没有加上。")])]),s._v(" "),t("p",[s._v("而如果把这两个操作作为一个整体来处理，要么全部成功要么全部失败，像这样的功能我们称之为“事务（"),t("code",[s._v("transaction")]),s._v("）”，然后将事务开始之后的处理结果反映到数据库的操作称为“提交（"),t("code",[s._v("commit")]),s._v("）”，不反映到数据库中而是恢复成原来状态的操作成为“回滚（"),t("code",[s._v("rollback")]),s._v("）”。")]),s._v(" "),t("h2",{attrs:{id:"使用事务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用事务"}},[s._v("#")]),s._v(" 使用事务")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("START TRANSACTION 或 BEGIN")]),s._v("：开始一个新的事务。")]),s._v(" "),t("li",[t("strong",[s._v("COMMIT")]),s._v("：提交当前事务，使其对数据库的更改永久生效。")]),s._v(" "),t("li",[t("strong",[s._v("ROLLBACK")]),s._v("：回滚当前事务，撤销所有未提交的操作。")]),s._v(" "),t("li",[t("strong",[s._v("SAVEPOINT")]),s._v("：在事务中设置保存点，可以回滚到某个保存点而不是整个事务。")]),s._v(" "),t("li",[t("strong",[s._v("RELEASE SAVEPOINT")]),s._v("：释放保存点。")])]),s._v(" "),t("p",[t("strong",[s._v("示例")])]),s._v(" "),t("p",[s._v("假设我们有一个 "),t("code",[s._v("accounts")]),s._v(" 表，并希望创建一个存储过程来模拟两个账户之间的转账操作。我们将使用事务来确保转账操作的原子性和一致性。")]),s._v(" "),t("p",[t("strong",[s._v("创建表：")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 创建 accounts 表")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TABLE")]),s._v(" accounts "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n    account_id "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("AUTO_INCREMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PRIMARY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("KEY")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'账户ID'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    owner_name "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VARCHAR")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'账户所有人'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    balance "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECIMAL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMENT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'余额'")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 插入示例数据")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INSERT")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" accounts "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("owner_name"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" balance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("VALUES")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Alice'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000.00")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Bob'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500.00")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])]),t("p",[t("strong",[s._v("创建存储过程：")])]),s._v(" "),t("p",[s._v("我们将创建一个存储过程 "),t("code",[s._v("transfer_money")]),s._v("，该过程用于从一个账户向另一个账户转账，并使用事务来确保操作的原子性和一致性。")]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 定义了一个名为transfer_money的存储过程")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 该存储过程接受三个输入参数：")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- from_account：转出账户的ID，类型为INT。")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- to_account：转入账户的ID，类型为INT。")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- amount：转账金额，类型为DECIMAL(10, 2)")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CREATE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("PROCEDURE")]),s._v(" transfer_money"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" from_account "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" to_account "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("IN")]),s._v(" amount "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECIMAL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("BEGIN")]),s._v("\n\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 声明一个变量from_balance，用于存储转出账户的余额")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECLARE")]),s._v(" from_balance "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("DECIMAL")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 开始一个新的事务，确保转账操作的原子性")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("START")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("TRANSACTION")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 获取转出账户的余额，从 accounts 表中选择 from_account 账户的余额，并将其存储在 from_balance 变量中")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- FOR UPDATE 子句用于锁定该行，防止其他事务同时修改该行数据，确保数据一致性")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SELECT")]),s._v(" balance "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("INTO")]),s._v(" from_balance "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" accounts "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" account_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" from_account "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FOR")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 检查余额是否足够")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),s._v(" from_balance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v(" amount "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("THEN")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 检查转出账户的余额是否小于转账金额")]),s._v("\n    \t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 如果余额不足，抛出一个自定义的SQL错误，错误代码为45000，错误信息为'Insufficient balance'")]),s._v("\n        SIGNAL SQLSTATE "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'45000'")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" MESSAGE_TEXT "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Insufficient balance'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 回滚事务，撤销所有未提交的更改")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ROLLBACK")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ELSE")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 扣除转出账户的金额")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" accounts "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" balance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" balance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" amount "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" account_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" from_account"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 增加转入账户的金额")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("UPDATE")]),s._v(" accounts "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("SET")]),s._v(" balance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" balance "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),s._v(" amount "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("WHERE")]),s._v(" account_id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" to_account"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n        "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("-- 提交事务，使所有更改永久生效")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("COMMIT")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("IF")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("END")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br")])]),t("p",[t("strong",[s._v("调用")])]),s._v(" "),t("div",{staticClass:"language-sql line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-sql"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("CALL")]),s._v(" transfer_money"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200.00")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[t("strong",[s._v("结果")])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("account_id")]),s._v(" "),t("th",[s._v("owner_name")]),s._v(" "),t("th",[s._v("balance")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("1")]),s._v(" "),t("td",[s._v("Alice")]),s._v(" "),t("td",[s._v("800.00")])]),s._v(" "),t("tr",[t("td",[s._v("2")]),s._v(" "),t("td",[s._v("Bob")]),s._v(" "),t("td",[s._v("700.00")])])])]),s._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[s._v("#")]),s._v(" 总结")]),s._v(" "),t("ul",[t("li",[t("strong",[s._v("事务")]),s._v("：一组逻辑上相关的 SQL 操作，确保数据的一致性和完整性。")]),s._v(" "),t("li",[t("strong",[s._v("事务控制语句")]),s._v("：包括 "),t("code",[s._v("START TRANSACTION")]),s._v("、"),t("code",[s._v("COMMIT")]),s._v("、"),t("code",[s._v("ROLLBACK")]),s._v("、"),t("code",[s._v("SAVEPOINT")]),s._v(" 和 "),t("code",[s._v("RELEASE SAVEPOINT")]),s._v("。")]),s._v(" "),t("li",[t("strong",[s._v("锁机制")]),s._v("：使用 "),t("code",[s._v("FOR UPDATE")]),s._v(" 锁定行，防止其他事务修改。")]),s._v(" "),t("li",[t("strong",[s._v("错误处理")]),s._v("：使用 "),t("code",[s._v("SIGNAL")]),s._v(" 抛出自定义错误，并使用 "),t("code",[s._v("ROLLBACK")]),s._v(" 回滚事务。")])])])}),[],!1,null,null,null);t.default=e.exports}}]);