(window.webpackJsonp=window.webpackJsonp||[]).push([[596],{969:function(e,t,s){"use strict";s.r(t);var v=s(5),r=Object(v.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"_1-前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-前言"}},[e._v("#")]),e._v(" 1，前言")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("分享一下vue项目中利用"),t("code",[e._v(".env")]),e._v("文件存储全局环境变量，以及利于项目开发的"),t("code",[e._v("vue")]),e._v("启动以及打包命令。")]),e._v(" "),t("h1",{attrs:{id:"_2-env文件的作用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-env文件的作用"}},[e._v("#")]),e._v(" 2，.env文件的作用")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("在"),t("code",[e._v("vue")]),e._v("项目中，"),t("code",[e._v("env")]),e._v("是全局配置文件，可以存储不同环境下的变量。使用"),t("code",[e._v("vue-cli")]),e._v("搭建项目，默认会在根目录创建一个"),t("code",[e._v(".env")]),e._v("文件，如果需要更多类型的"),t("code",[e._v(".env")]),e._v("文件，需要自行创建。\n"),t("img",{attrs:{src:"https://img-blog.csdnimg.cn/20210422102358830.png",alt:"目录"}})]),e._v(" "),t("p",[e._v("其中：")]),e._v(" "),t("p",[t("code",[e._v("1")]),e._v("，.env 后缀的文件是全局默认配置文件，不论什么环境都会加载并合并。")]),e._v(" "),t("p",[t("code",[e._v("2")]),e._v("，.env.development 是开发环境下的配置文件，仅在开发环境加载。")]),e._v(" "),t("p",[t("code",[e._v("3")]),e._v("，.env.production 是生产环境下的配置文件（也就是正式环境），仅在生产环境加载。")]),e._v(" "),t("p",[e._v("以上三个命名不能变动，除此之外，可以另外自定义加上"),t("code",[e._v(".env.test")]),e._v("文件，也就是测试环境，或者"),t("code",[e._v(".env.bata")]),e._v("，也就是内部测试版，等等...")]),e._v(" "),t("h1",{attrs:{id:"_3-配置-env文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置-env文件"}},[e._v("#")]),e._v(" 3，配置.env文件")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("变量命名必须以"),t("code",[e._v("VUE_APP_")]),e._v("开头，比如"),t("code",[e._v("VUE_APP_URL")]),e._v("，"),t("code",[e._v("VUE_APP_PWD")])]),e._v(" "),t("p",[t("img",{attrs:{src:"https://img-blog.csdnimg.cn/2021042210234214.png",alt:"命名"}})]),e._v(" "),t("h1",{attrs:{id:"_4-配置启动命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置启动命令"}},[e._v("#")]),e._v(" 4，配置启动命令")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("在vue项目根目录下，找到package.json文件，其中scripts对象是配置的vue启动命令，比如npm run dev，配置如下：")]),e._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[e._v("  "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"scripts"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"serve"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"vue-cli-service serve"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"serve-test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"vue-cli-service serve --mode test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"build"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"vue-cli-service build"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"test"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"vue-cli-service build --mode test"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),t("span",{pre:!0,attrs:{class:"token string-property property"}},[e._v('"all"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"vue-cli-service build && vue-cli-service build --mode test"')]),e._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br"),t("span",{staticClass:"line-number"},[e._v("6")]),t("br"),t("span",{staticClass:"line-number"},[e._v("7")]),t("br")])]),t("p",[e._v("每一行说明如下：")]),e._v(" "),t("p",[t("code",[e._v("1")]),e._v("，npm run serve，启动项目，并且加载.env和.env.development文件")]),e._v(" "),t("p",[t("code",[e._v("2")]),e._v("，npm run serve-test，启动项目，并且加载.env和.env.test文件")]),e._v(" "),t("p",[t("code",[e._v("3")]),e._v("，npm run build，生产环境打包，其中.env和.env.production文件会加载")]),e._v(" "),t("p",[t("code",[e._v("4")]),e._v("，npm run test，测试环境打包，其中.env和.env.test文件会加载")]),e._v(" "),t("p",[t("code",[e._v("5")]),e._v("，npm run all，生产环境和测试环境同时打包，加载不同的.env文件")]),e._v(" "),t("h1",{attrs:{id:"_5-获取-env中的全局变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-获取-env中的全局变量"}},[e._v("#")]),e._v(" 5，获取.env中的全局变量")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("比如，我在.env文件中设置了变量"),t("code",[e._v("VUE_APP_BASE_URL = 'https://www.baidu.com'")]),e._v("，在项目中我想获取，只需要使用"),t("code",[e._v("process.env.VUE_APP_BASE_URL")]),e._v("，就可以取到。")]),e._v(" "),t("h1",{attrs:{id:"_5-实际用处"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-实际用处"}},[e._v("#")]),e._v(" 5，实际用处")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("个人觉得最大的用处就是不同环境加载不同的变量，比如开发环境和测试、正式环境的请求域名不同，直接在"),t("code",[e._v(".env")]),e._v("文件中定义一个全局的"),t("code",[e._v("URL")]),e._v("，在请求封装中使用，很方便。")])])}),[],!1,null,null,null);t.default=r.exports}}]);