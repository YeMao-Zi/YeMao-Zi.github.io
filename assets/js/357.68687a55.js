(window.webpackJsonp=window.webpackJsonp||[]).push([[357],{732:function(t,s,a){"use strict";a.r(s);var n=a(5),r=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("TypeORM æ€ä¹ˆç”¨æˆ‘ä»¬å·²ç»å­¦ä¼šäº†ï¼Œåœ¨ Nest é‡Œç”¨é‚£ä¸å°±æ˜¯å†å°è£…ä¸€å±‚çš„äº‹æƒ…ä¹ˆï¼Ÿ")]),t._v(" "),s("p",[t._v("é‚£æ€ä¹ˆå°è£…å‘¢ï¼Ÿ")]),t._v(" "),s("h2",{attrs:{id:"å…ˆå›å¿†ä¸‹-typeorm-çš„æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å…ˆå›å¿†ä¸‹-typeorm-çš„æµç¨‹"}},[t._v("#")]),t._v(" å…ˆå›å¿†ä¸‹ TypeORM çš„æµç¨‹ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/21/Ygz23tIHkFLDos4.png",alt:""}})]),t._v(" "),s("p",[t._v("1.DataSource é‡Œå­˜æ”¾ç€æ•°æ®åº“è¿æ¥çš„é…ç½®ï¼Œæ¯”å¦‚ç”¨æˆ·åã€å¯†ç ã€é©±åŠ¨åŒ…ã€è¿æ¥æ± é…ç½®ç­‰ç­‰ã€‚")]),t._v(" "),s("p",[t._v("2.è€Œ Entity é‡Œé€šè¿‡ @Entityã€@PrimaryGeneratedColumnã€@Column ç­‰è£…é¥°å™¨æ¥å»ºç«‹æ•°æ®åº“è¡¨çš„æ˜ å°„å…³ç³»ã€‚")]),t._v(" "),s("p",[t._v("3.åŒæ—¶è¿˜æœ‰ Entity ä¹‹é—´çš„ @OneToOneã€@OneToManyã€@ManyToMany çš„å…³ç³»ï¼Œè¿™äº›ä¼šæ˜ å°„æˆæ•°æ®åº“è¡¨é€šè¿‡å¤–é”®ã€ä¸­é—´è¡¨æ¥å»ºç«‹çš„å…³ç³»ã€‚")]),t._v(" "),s("p",[t._v("4.DataSource.initialize çš„æ—¶å€™ï¼Œä¼šå’Œæ•°æ®åº“æœåŠ¡å»ºç«‹è¿æ¥ï¼Œå¦‚æœé…ç½®äº† synchronizeï¼Œè¿˜ä¼šç”Ÿæˆå»ºè¡¨ sql è¯­å¥æ¥åˆ›å»ºè¡¨ã€‚")]),t._v(" "),s("p",[t._v("5.DataSource åˆå§‹åŒ–ä¹‹åå°±å¯ä»¥æ‹¿åˆ° EntityManager äº†ï¼Œç”±å®ƒè´Ÿè´£å¯¹å„ç§ Entity è¿›è¡Œå¢åˆ æ”¹æŸ¥ï¼Œæ¯”å¦‚ findã€deleteã€save ç­‰æ–¹æ³•ï¼Œè¿˜å¯ä»¥é€šè¿‡ query builder æ¥åˆ›å»ºå¤æ‚çš„æŸ¥è¯¢ã€‚")]),t._v(" "),s("p",[t._v("6.å¦‚æœä½ åªæ˜¯æƒ³åšå¯¹å•ä¸ª Entity çš„ CRUDï¼Œé‚£å¯ä»¥æ‹¿åˆ°è¿™ä¸ª Entity çš„ Repository ç±»ï¼Œå®ƒåŒæ ·æœ‰ä¸Šé¢çš„é‚£äº›æ–¹æ³•ï¼Œåªæ˜¯åªèƒ½ç”¨æ¥æ“ä½œå•ä¸ª Entityã€‚")]),t._v(" "),s("p",[t._v("è¿™å°±æ˜¯ TypeORM çš„æµç¨‹ã€‚")]),t._v(" "),s("h2",{attrs:{id:"é‚£å¦‚æœè®©ä½ æŠŠ-typeorm-çš„-api-å°è£…ä¸€å±‚-åšæˆä¸€ä¸ª-typeormmodule-ä½ ä¼šæ€ä¹ˆå°è£…å‘¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é‚£å¦‚æœè®©ä½ æŠŠ-typeorm-çš„-api-å°è£…ä¸€å±‚-åšæˆä¸€ä¸ª-typeormmodule-ä½ ä¼šæ€ä¹ˆå°è£…å‘¢"}},[t._v("#")]),t._v(" é‚£å¦‚æœè®©ä½ æŠŠ TypeORM çš„ api å°è£…ä¸€å±‚ï¼Œåšæˆä¸€ä¸ª TypeOrmModuleï¼Œä½ ä¼šæ€ä¹ˆå°è£…å‘¢ï¼Ÿ")]),t._v(" "),s("p",[t._v("å¾ˆæ˜æ˜¾ï¼Œè¿™é‡Œçš„ datasource çš„é…ç½®æ˜¯éœ€è¦æ‰‹åŠ¨ä¼ å…¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦åšæˆåŠ¨æ€æ¨¡å—ï¼Œæ”¯æŒæ ¹æ®ä¼ å…¥çš„é…ç½®æ¥åŠ¨æ€äº§ç”Ÿæ¨¡å—å†…å®¹ã€‚")]),t._v(" "),s("p",[t._v("è€ŒåŠ¨æ€æ¨¡å—çš„è§„èŒƒé‡Œå°± 3 ç§æ–¹æ³•åï¼š registerã€forRootã€forFeatureã€‚")]),t._v(" "),s("p",[t._v("è¿™é‡Œå¾ˆæ˜æ˜¾è¦ç”¨ forRootï¼Œä¹Ÿå°±æ˜¯åªéœ€è¦æ³¨å†Œä¸€æ¬¡ï¼Œç„¶åè¿™ä¸ªæ¨¡å—ä¼šåœ¨å„å¤„è¢«ä½¿ç”¨ã€‚")]),t._v(" "),s("p",[t._v("ç±»ä¼¼è¿™æ ·ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Module "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@nestjs/common"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" TypeOrmModule "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("imports")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    TypeOrmModule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forRoot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mysql"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("host")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3306")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("username")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("password")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("database")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entities")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("synchronize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppModule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br")])]),s("p",[t._v("ç„¶åå†…éƒ¨å°±æ ¹æ®ä¼ å…¥çš„é…ç½®æ¥åˆ›å»º DataSourceï¼Œè°ƒç”¨ intialize æ–¹æ³•ï¼Œä¹‹åå°±æ‹¿åˆ° EntityManagerï¼Œå¯ä»¥åš CRUD äº†ã€‚")]),t._v(" "),s("p",[t._v("ä½†æ˜¯ Entity è‚¯å®šä¼šåˆ†æ•£åœ¨å„ä¸ªä¸šåŠ¡æ¨¡å—ï¼Œæ¯ä¸ªæ¨¡å—éƒ½é€šè¿‡ forRoot å¼•å…¥é‚£ä¸ªæ¨¡å—å¤ªéº»çƒ¦ï¼Œæˆ‘ä»¬å¹²è„†æŠŠå®ƒç”¨ @Global å£°æ˜æˆå…¨å±€çš„ã€‚")]),t._v(" "),s("p",[t._v("è¿™æ ·æ¯ä¸ªæ¨¡å—é‡Œå°±éƒ½å¯ä»¥æ³¨å…¥ EntityManager æ¥ç”¨äº†ï¼Œä¸éœ€è¦ importsã€‚")]),t._v(" "),s("p",[t._v("é‚£å¦‚æœæˆ‘æƒ³ç”¨ Repository çš„æ–¹å¼æ¥ CRUD å‘¢ï¼Ÿ")]),t._v(" "),s("p",[t._v("é‚£å¯ä»¥å…ˆæ³¨å…¥ EntityManagerï¼Œç„¶åå†é€šè¿‡ EntityManager.getRepository(XxxEntity) æ¥æ‹¿å‘€ã€‚")]),t._v(" "),s("p",[t._v("æˆ–è€…å¯ä»¥å†åšä¸€ä¸ªåŠ¨æ€æ¨¡å—ï¼Œä¼ å…¥ Entityï¼Œè¿”å›å®ƒçš„ Repositoryã€‚")]),t._v(" "),s("p",[t._v("è¿™ç§å±€éƒ¨çš„åŠ¨æ€æ¨¡å—ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨ forFeature çš„åå­—ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Module "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@nestjs/common"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" TypeOrmModule "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" UsersService "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./users.service"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" User "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./user.entity"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("imports")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("TypeOrmModule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forFeature")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("providers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("UsersService"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("controllers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UsersModule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("p",[t._v("æ¯”å¦‚ä¼ å…¥ Userï¼Œå†…éƒ¨é€šè¿‡ EntityManager.getRepository(User) æ¥æ‹¿åˆ° UserEntityã€‚")]),t._v(" "),s("p",[t._v("è¿™æ · UserService é‡Œå°±å¯ä»¥é€šè¿‡ UserRepository æ¥å®ç°å¢åˆ æ”¹æŸ¥äº†ã€‚")]),t._v(" "),s("p",[t._v("è¿™ä¸ªå°è£…æ€è·¯è²Œä¼¼æŒºå®Œç¾ã€‚")]),t._v(" "),s("h2",{attrs:{id:"é‚£æˆ‘ä»¬æ¥çœ‹çœ‹-nestjs-typeorm-æ˜¯æ€ä¹ˆå°è£…çš„å§ã€‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é‚£æˆ‘ä»¬æ¥çœ‹çœ‹-nestjs-typeorm-æ˜¯æ€ä¹ˆå°è£…çš„å§ã€‚"}},[t._v("#")]),t._v(" é‚£æˆ‘ä»¬æ¥çœ‹çœ‹ @nestjs/typeorm æ˜¯æ€ä¹ˆå°è£…çš„å§ã€‚")]),t._v(" "),s("p",[t._v("åˆ›å»ºä¸ª Nest é¡¹ç›®ï¼š")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("nest new nest-typeorm "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/22/kJHyoTPmRvC9n3w.png",alt:""}})]),t._v(" "),s("p",[t._v("ç„¶ååˆ›å»ºä¸€ä¸ª crud çš„æ¨¡å—ï¼š")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("nest g resource user\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/22/lZ6YJz5Axpw2ath.png",alt:""}})]),t._v(" "),s("p",[t._v("ç”Ÿæˆçš„ service é‡Œçš„ crud å¹¶æ²¡æœ‰çœŸæ­£å®ç°ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/22/x2kIaBvQsoS3OUq.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"æˆ‘ä»¬å¼•å…¥-typeorm-æ¥å®ç°ä¸‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æˆ‘ä»¬å¼•å…¥-typeorm-æ¥å®ç°ä¸‹"}},[t._v("#")]),t._v(" ğŸš€æˆ‘ä»¬å¼•å…¥ typeorm æ¥å®ç°ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--save")]),t._v(" @nestjs/typeorm typeorm mysql2\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("typeormã€mysql2 çš„åŒ…æˆ‘ä»¬å¾ˆç†Ÿæ‚‰äº†ï¼Œè€Œ @nestjs/typeorm å°±æ˜¯æŠŠ typeorm api å°è£…äº†ä¸€å±‚çš„åŒ…ã€‚")]),t._v(" "),s("p",[t._v("å®ƒæä¾›äº†ä¸€ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬åœ¨å…¥å£å¼•å…¥ä¸‹ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/euSqtpmJ1zOHW8o.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"è¿æ¥é…ç½®å’Œå‰å‡ èŠ‚ä¸€æ ·-å¼•å…¥-user-çš„-entityã€‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#è¿æ¥é…ç½®å’Œå‰å‡ èŠ‚ä¸€æ ·-å¼•å…¥-user-çš„-entityã€‚"}},[t._v("#")]),t._v(" è¿æ¥é…ç½®å’Œå‰å‡ èŠ‚ä¸€æ ·ï¼Œå¼•å…¥ User çš„ Entityã€‚")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Module "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@nestjs/common"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" TypeOrmModule "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@nestjs/typeorm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" AppController "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./app.controller"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" AppService "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./app.service"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" User "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./user/entities/user.entity"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" UserModule "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./user/user.module"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Module")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("imports")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    UserModule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    TypeOrmModule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("forRoot")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mysql"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("host")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("port")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3306")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("username")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"root"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("password")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"guang"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("database")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typeorm_test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("synchronize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("logging")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entities")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("poolSize")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("connectorPackage")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mysql2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("extra")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("authPlugin")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sha256_password"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("controllers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("AppController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("providers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("AppService"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppModule")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br")])]),s("h3",{attrs:{id:"ç„¶ååœ¨-user-çš„-entity-é‡ŒåŠ ä¸€äº›æ˜ å°„çš„ä¿¡æ¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç„¶ååœ¨-user-çš„-entity-é‡ŒåŠ ä¸€äº›æ˜ å°„çš„ä¿¡æ¯"}},[t._v("#")]),t._v(" ç„¶ååœ¨ User çš„ Entity é‡ŒåŠ ä¸€äº›æ˜ å°„çš„ä¿¡æ¯ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Column"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Entity"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" PrimaryGeneratedColumn "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typeorm"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Entity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aaa_user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  @"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PrimaryGeneratedColumn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  @"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Column")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"aaa_name"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("length")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("p",[t._v("ç»™æ˜ å°„çš„è¡¨ç»™ä¸ªåå­—å« aaa_userï¼Œç„¶åæœ‰ä¸¤ä¸ªå­—æ®µï¼Œåˆ†åˆ«æ˜¯ id å’Œ nameã€‚")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬è·‘ä¸€ä¸‹è¯•è¯•ï¼š")]),t._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run start:dev\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("çœ‹åˆ°å»ºè¡¨ sql äº†æ²¡ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/eLpklj6dDaSrb7Q.png",alt:""}})]),t._v(" "),s("p",[t._v("è¿™éƒ¨åˆ†å’Œæˆ‘ä»¬å•ç‹¬è·‘ typeorm æ²¡å•¥åŒºåˆ«ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/M3AEBTbxIreH6Cv.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"ç„¶åæ˜¯å¢åˆ æ”¹æŸ¥-æˆ‘ä»¬å¯ä»¥æ³¨å…¥-entitymanager"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç„¶åæ˜¯å¢åˆ æ”¹æŸ¥-æˆ‘ä»¬å¯ä»¥æ³¨å…¥-entitymanager"}},[t._v("#")]),t._v(" ç„¶åæ˜¯å¢åˆ æ”¹æŸ¥ï¼Œæˆ‘ä»¬å¯ä»¥æ³¨å…¥ EntityManagerï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/j34JPR7w8S9YmrW.png",alt:""}})]),t._v(" "),s("p",[t._v("ç”¨å®ƒæ¥åšå¢åˆ æ”¹æŸ¥ï¼š")]),t._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Injectable "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@nestjs/common'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" InjectEntityManager "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@nestjs/typeorm'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" EntityManager "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'typeorm'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" CreateUserDto "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dto/create-user.dto'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" UpdateUserDto "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./dto/update-user.dto'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" User "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./entities/user.entity'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n@"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("Injectable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("UserService")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  @"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("InjectEntityManager")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("manager")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" EntityManager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("createUserDto")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" CreateUserDto")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createUserDto"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("find")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOne")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("findOne")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("where")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" id "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("update")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("updateUserDto")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" UpdateUserDto")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("save")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("updateUserDto\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("remove")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("manager"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("delete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("User"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br")])]),s("p",[t._v("è¿™é‡Œçš„ saveã€findOneã€delete æ–¹æ³•æˆ‘ä»¬éƒ½ç”¨è¿‡ã€‚")]),t._v(" "),s("p",[t._v("ç„¶åæˆ‘ä»¬ç”¨ postman æ¥è¯•ä¸€ä¸‹ï¼š")]),t._v(" "),s("p",[t._v("å‘ä¸ª post è¯·æ±‚ï¼Œå¸¦ä¸Šè¦æ·»åŠ çš„æ•°æ®ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/sHcJtd9WDKnMi8f.png",alt:""}})]),t._v(" "),s("p",[t._v("æœåŠ¡ç«¯æ‰“å°äº† insert çš„ sql è¯­å¥ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/9wgz4XqWIbCGKiN.png",alt:""}})]),t._v(" "),s("p",[t._v("è¡¨é‡Œä¹Ÿå¯ä»¥çœ‹åˆ°è¿™æ¡æ•°æ®äº†ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/UqaiKtL2SrF1JgI.png",alt:""}})]),t._v(" "),s("p",[t._v("å¯¹åº”çš„æ˜¯è¿™ä¸ª handlerï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/ySpcazJBqsnKdmw.png",alt:""}})]),t._v(" "),s("p",[t._v("ç„¶åå†è¯•ä¸‹æŸ¥è¯¢ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/7cvAMbJt2CNyKdo.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/MWeRJxizVsq7QNd.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/sxKJ2ZQaI9GY73u.png",alt:""}})]),t._v(" "),s("p",[t._v("å•ä¸ªæŸ¥è¯¢å’Œå…¨éƒ¨æŸ¥è¯¢éƒ½æ˜¯å¯ä»¥çš„ã€‚")]),t._v(" "),s("p",[t._v("å†å°±æ˜¯ä¿®æ”¹ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/DJItXATO2HqLmgP.png",alt:""}})]),t._v(" "),s("p",[t._v("åœ¨ controller é‡Œæ˜¯æ¥å— patch çš„è¯·æ±‚ã€‚")]),t._v(" "),s("p",[t._v("åœ¨ postman é‡Œå‘ä¸€ä¸‹ï¼š\n"),s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/vSWfALd39y1mHpD.png",alt:""}})]),t._v(" "),s("p",[t._v("å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº† update çš„ sql è¯­å¥ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/5otvpdHZ3Q4rP1u.png",alt:""}})]),t._v(" "),s("p",[t._v("æ•°æ®åº“ä¸­çš„æ•°æ®ä¹Ÿè¢«ä¿®æ”¹äº†ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/iGjTkbBDHl7FoEI.png",alt:""}})]),t._v(" "),s("p",[t._v("å†è¯•è¯•åˆ é™¤ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/DutroASV9CFfBTN.png",alt:""}})]),t._v(" "),s("p",[t._v("åœ¨ postman é‡Œå‘é€ delete çš„è¯·æ±‚ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/gLHJQpDox5qRvra.png",alt:""}})]),t._v(" "),s("p",[t._v("å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº† delete çš„ sql è¯­å¥ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/F2mkXPOdKxIS74v.png",alt:""}})]),t._v(" "),s("p",[t._v("æ•°æ®åº“é‡Œçš„æ•°æ®ç¡®å®è¢«åˆ é™¤äº†ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/gsPZVHpy6loGvn8.png",alt:""}})]),t._v(" "),s("p",[t._v("è‡³æ­¤ï¼Œæˆ‘ä»¬å°±æ­£å¼æ‰“é€šäº†ä»è¯·æ±‚åˆ°æ•°æ®åº“çš„æ•´ä¸ªæµç¨‹ï¼")]),t._v(" "),s("p",[t._v("è¿™é‡Œçš„ CRUD éƒ¨åˆ†ç”¨åˆ°çš„ api æˆ‘ä»¬éƒ½ç”¨è¿‡å¥½å¤šéäº†ã€‚")]),t._v(" "),s("p",[t._v("åªä¸è¿‡ç°åœ¨æ˜¯é€šè¿‡ TypeOrm.forRoot æ¥ä¼ å…¥çš„æ•°æ®æºçš„é…ç½®ï¼Œé€šè¿‡ @InjectEntityManager æ¥æ³¨å…¥çš„ entityManager å¯¹è±¡ã€‚")]),t._v(" "),s("p",[t._v("ç›´æ¥ç”¨ EntityManager çš„ç¼ºç‚¹æ˜¯æ¯ä¸ª api éƒ½è¦å¸¦ä¸Šå¯¹åº”çš„ Entityï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/pxVeI4r2UG9mbsP.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"ç®€ä¾¿æ–¹æ³•å°±æ˜¯å…ˆ-getrepository-user-æ‹¿åˆ°-user-å¯¹åº”çš„-repository-å¯¹è±¡-å†è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ç®€ä¾¿æ–¹æ³•å°±æ˜¯å…ˆ-getrepository-user-æ‹¿åˆ°-user-å¯¹åº”çš„-repository-å¯¹è±¡-å†è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚"}},[t._v("#")]),t._v(" ç®€ä¾¿æ–¹æ³•å°±æ˜¯å…ˆ getRepository(User) æ‹¿åˆ° user å¯¹åº”çš„ Repository å¯¹è±¡ï¼Œå†è°ƒç”¨è¿™äº›æ–¹æ³•ã€‚")]),t._v(" "),s("p",[t._v("æ¯”å¦‚è¿™æ ·ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0e9ebb1b29024f34bd9186d5f44cc09c~tplv-k3u1fbpfcp-watermark.image?",alt:""}})]),t._v(" "),s("p",[t._v("é‚£è¿˜ä¸å¦‚ç›´æ¥æ³¨å…¥ User å¯¹åº”çš„ Respository å°±å¥½äº†ã€‚")]),t._v(" "),s("p",[t._v("Nest å¯¹è¿™ä¸ªåšäº†å°è£…ï¼Œåœ¨ user æ¨¡å—å¼•å…¥ TypeOrmModule.forFeature å¯¹åº”çš„åŠ¨æ€æ¨¡å—ï¼Œä¼ å…¥ User çš„ Entityï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/RHEnTrqw9uKUD62.png",alt:""}})]),t._v(" "),s("p",[t._v("å°±å¯ä»¥åœ¨æ¨¡å—é‡Œæ³¨å…¥ Repository äº†ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/ReaIVogskq9mtMl.png",alt:""}})]),t._v(" "),s("p",[t._v("å®ƒæœ‰çš„æ–¹æ³•å’Œ EntityManager ä¸€æ ·ï¼Œåªæ˜¯åªèƒ½ç”¨æ¥æ“ä½œå½“å‰ Entityã€‚")]),t._v(" "),s("h3",{attrs:{id:"æ­¤å¤–-ä½ è¿˜å¯ä»¥æ³¨å…¥-datasource"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ­¤å¤–-ä½ è¿˜å¯ä»¥æ³¨å…¥-datasource"}},[t._v("#")]),t._v(" æ­¤å¤–ï¼Œä½ è¿˜å¯ä»¥æ³¨å…¥ DataSourceï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/EDUV4XRJhAOLueT.png",alt:""}})]),t._v(" "),s("p",[t._v("ä¸è¿‡è¿™ä¸ªä¸å¸¸ç”¨ã€‚")]),t._v(" "),s("p",[t._v("è¿™å°±æ˜¯ Nest é‡Œé›†æˆ TypeOrm çš„æ–¹å¼ã€‚")]),t._v(" "),s("p",[t._v("æœ‰äº† TypeOrm çš„ä½¿ç”¨åŸºç¡€ä¹‹åï¼Œå­¦èµ·æ¥è¿˜æ˜¯éå¸¸ç®€å•çš„ã€‚")]),t._v(" "),s("h2",{attrs:{id:"é‚£å®ƒæ˜¯æ€ä¹ˆå®ç°çš„å‘¢"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#é‚£å®ƒæ˜¯æ€ä¹ˆå®ç°çš„å‘¢"}},[t._v("#")]),t._v(" é‚£å®ƒæ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬æ¥çœ‹ä¸‹æºç ï¼š")]),t._v(" "),s("p",[t._v("é¦–å…ˆï¼Œæˆ‘ä»¬é€šè¿‡å¼•å…¥ TypeOrmModule.forRoot çš„åŠ¨æ€æ¨¡å—çš„æ—¶å€™ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/jXYcfoUkL89OlvK.png",alt:""}})]),t._v(" "),s("p",[t._v("å®ƒä¼šå¼•å…¥ TypeOrmCoreModule.forRoot çš„åŠ¨æ€æ¨¡å—ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/lRaWmhZTbuKdYDw.png",alt:""}})]),t._v(" "),s("p",[t._v("è¿™é‡Œé¢æ ¹æ® options åˆ›å»º DataSource å’Œ EntityManager æ”¾åˆ°æ¨¡å—çš„ provider é‡Œï¼Œå¹¶æ”¾åˆ°äº† exports é‡Œã€‚")]),t._v(" "),s("p",[t._v("è€Œä¸”ï¼Œæ›´é‡è¦çš„æ˜¯è¿™ä¸ªæ¨¡å—æ˜¯ @Global çš„å…¨å±€æ¨¡å—ã€‚")]),t._v(" "),s("p",[t._v("å› æ­¤ï¼ŒdataSource å’Œ entityManager å°±å¯ä»¥åœ¨ä»»æ„çš„åœ°æ–¹æ³¨å…¥äº†ã€‚")]),t._v(" "),s("p",[t._v("ä¸Šé¢é‚£ä¸¤ä¸ªæ–¹æ³•é‡Œï¼Œåˆ›å»º DataSource çš„è¿‡ç¨‹å°±æ˜¯ä¼ å…¥å‚æ•°ï¼Œè°ƒç”¨ intialize æ–¹æ³•ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/LYQIefXlv8D3COc.png",alt:""}})]),t._v(" "),s("p",[t._v("è€Œåˆ›å»º entityManagerï¼Œåˆ™æ˜¯æ³¨å…¥ dataSource å– manager å±æ€§å°±å¥½äº†ï¼š")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/Vge7qNm6RZSFclo.png",alt:""}})]),t._v(" "),s("p",[t._v("ç„¶å TypeOrmModule.forFeature åˆ™æ˜¯é€šè¿‡å…¨å±€çš„ dataSource.getRepository æ‹¿åˆ°å‚æ•°å¯¹åº”çš„ Repository å¯¹è±¡ï¼Œä½œä¸ºæ¨¡å—å†…çš„ providerã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/Qt4p3BEoaGKNPO7.png",alt:""}})]),t._v(" "),s("p",[s("img",{attrs:{src:"https://s2.loli.net/2025/07/23/dK7MQfVPzBc3Chi.png",alt:""}})]),t._v(" "),s("p",[t._v("è¿™æ ·å¼•å…¥è¿™ä¸ªåŠ¨æ€æ¨¡å—çš„æ¨¡å—å†…å°±å¯ä»¥æ³¨å…¥è¿™äº› Entity å¯¹åº”çš„ Repository äº†ã€‚")]),t._v(" "),s("p",[t._v("è¿™å°±æ˜¯ @nestjs/typeorm çš„ TypeOrmModule.forRoot å’Œ TypeOrmModule.forFeature çš„å®ç°åŸç†ã€‚")]),t._v(" "),s("p",[t._v("æ¡ˆä¾‹ä»£ç åœ¨"),s("a",{attrs:{href:"https://github.com/QuarkGluonPlasma/nestjs-course-code/tree/main/nest-typeorm",target:"_blank",rel:"noopener noreferrer"}},[t._v("å°å†Œä»“åº“"),s("OutboundLink")],1),t._v("ã€‚")]),t._v(" "),s("h2",{attrs:{id:"æ€»ç»“"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ€»ç»“"}},[t._v("#")]),t._v(" æ€»ç»“")]),t._v(" "),s("p",[t._v("æˆ‘ä»¬ä¼šäº†ç”¨ TypeOrm æ¥è¿æ¥å’Œå¢åˆ æ”¹æŸ¥æ•°æ®åº“è¡¨ï¼Œåœ¨ Nest é‡Œé›†æˆåªæ˜¯å¯¹ TyprOrm çš„ api å°è£…äº†ä¸€å±‚ã€‚")]),t._v(" "),s("p",[t._v("ä½¿ç”¨æ–¹å¼æ˜¯åœ¨æ ¹æ¨¡å— TypeOrmModule.forRoot ä¼ å…¥æ•°æ®æºé…ç½®ã€‚")]),t._v(" "),s("p",[t._v("ç„¶åå°±å¯ä»¥åœ¨å„å¤„æ³¨å…¥ DataSourceã€EntityManager æ¥åšå¢åˆ æ”¹æŸ¥äº†ã€‚")]),t._v(" "),s("p",[t._v("å¦‚æœæƒ³ç”¨ Repository æ¥ç®€åŒ–æ“ä½œï¼Œè¿˜å¯ä»¥åœ¨ç”¨åˆ°çš„æ¨¡å—å¼•å…¥ TypeOrmModule.forFeature çš„åŠ¨æ€æ¨¡å—ï¼Œä¼ å…¥ Entityï¼Œä¼šè¿”å›å¯¹åº”çš„ Repositoryã€‚")]),t._v(" "),s("p",[t._v("è¿™æ ·å°±å¯ä»¥åœ¨æ¨¡å—å†…æ³¨å…¥è¯¥ Repository æ¥ç”¨äº†ã€‚")]),t._v(" "),s("p",[t._v("å®ƒçš„åŸç†æ˜¯ TypeOrmModule.forRoot å¯¹åº”çš„åŠ¨æ€æ¨¡å—æ˜¯å…¨å±€çš„ï¼Œå¯¼å‡ºäº† dataSourceã€entityManagerï¼Œæ‰€ä»¥æ‰å¯ä»¥åˆ°å¤„æ³¨å…¥ã€‚")]),t._v(" "),s("p",[t._v("è€Œ TypeOrmModule.forFeature åˆ™ä¼šæ ¹æ®å§ä¼ å…¥ Entity å¯¹åº”çš„ Repository å¯¼å‡ºï¼Œè¿™æ ·å°±å¯ä»¥åœ¨æ¨¡å—å†…æ³¨å…¥äº†ã€‚")]),t._v(" "),s("p",[t._v("è¿™å°±æ˜¯ Nest é‡Œé›†æˆ TypeOrm çš„æ–¹å¼å’Œå®ç°åŸç†ã€‚")]),t._v(" "),s("p",[t._v("è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰“é€šä»è¯·æ±‚åˆ°æ•°æ®åº“çš„æµç¨‹äº†ã€‚")])])}),[],!1,null,null,null);s.default=r.exports}}]);