(window.webpackJsonp=window.webpackJsonp||[]).push([[201],{577:function(a,s,e){"use strict";e.r(s);var t=e(5),r=Object(t.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"数据备份"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据备份"}},[a._v("#")]),a._v(" 数据备份")]),a._v(" "),s("p",[a._v("在使用数据库的过程中，可能存在一些不可预估的因素（如误操作、病毒入侵等），会造成数据的破坏以及丢失。为了保证数据的安全性，我们需要经常对数据进行备份才行。")]),a._v(" "),s("h2",{attrs:{id:"库备份"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#库备份"}},[a._v("#")]),a._v(" 库备份")]),a._v(" "),s("p",[a._v("使用"),s("code",[a._v("mysqldump")]),a._v("可以将数据库导出为"),s("code",[a._v("SQL")]),a._v("脚本文件。")]),a._v(" "),s("h3",{attrs:{id:"备份整个数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备份整个数据库"}},[a._v("#")]),a._v(" 备份整个数据库")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mysqldump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" database_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" backup_file.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("这里，"),s("code",[a._v("username")]),a._v("是你用来登录"),s("code",[a._v("MySQL")]),a._v("的用户名，"),s("code",[a._v("database_name")]),a._v("是要备份的数据库名，"),s("code",[a._v("backup_file.sql")]),a._v("是备份文件的名字。执行命令后，系统会提示你输入密码。")]),a._v(" "),s("h3",{attrs:{id:"备份多个数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备份多个数据库"}},[a._v("#")]),a._v(" 备份多个数据库")]),a._v(" "),s("p",[a._v("如果你需要备份多个数据库，可以使用"),s("code",[a._v("--databases")]),a._v("选项。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mysqldump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--databases")]),a._v(" db_name1 db_name2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" multi_backup.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"备份所有数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备份所有数据库"}},[a._v("#")]),a._v(" 备份所有数据库")]),a._v(" "),s("p",[a._v("要备份服务器上的所有数据库，可以使用"),s("code",[a._v("--all-databases")]),a._v("选项。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mysqldump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" --all-databases "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" all_dbs_backup.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"还原数据库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#还原数据库"}},[a._v("#")]),a._v(" 还原数据库")]),a._v(" "),s("p",[s("strong",[a._v("创建新数据库（如果需要）：")])]),a._v(" "),s("p",[a._v("在还原之前，如果你是从头开始或需要一个新数据库来导入数据，首先创建一个新的数据库")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("CREATE")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("DATABASE")]),a._v(" new_database"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[s("strong",[a._v("还原数据库：")])]),a._v(" "),s("p",[a._v("使用"),s("code",[a._v("mysql")]),a._v("命令从备份文件中导入数据到指定的数据库:")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" new_database "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" backup_file.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("或者直接在命令行中执行：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"CREATE DATABASE IF NOT EXISTS new_database;"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" new_database "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" backup_file.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[a._v("笔记")]),a._v(" "),s("p",[a._v("确保在执行这些操作时有足够的权限，并注意保护好你的备份文件，避免未经授权的访问。此外，对于大型数据库，考虑使用压缩技术减少备份文件的大小以及传输时间。")])]),a._v(" "),s("h2",{attrs:{id:"表备份"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#表备份"}},[a._v("#")]),a._v(" 表备份")]),a._v(" "),s("p",[a._v("使用"),s("code",[a._v("mysqldump")]),a._v("可以针对特定的表进行备份")]),a._v(" "),s("h3",{attrs:{id:"备份单个表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备份单个表"}},[a._v("#")]),a._v(" 备份单个表")]),a._v(" "),s("div",{staticClass:"language-sql line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[a._v("mysqldump "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("u username "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("p database_name table_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" table_backup"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("sql")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("其中，"),s("code",[a._v("username")]),a._v("是你的MySQL用户名，"),s("code",[a._v("database_name")]),a._v("是你要备份表所在的数据库名，"),s("code",[a._v("table_name")]),a._v("是要备份的表名，"),s("code",[a._v("table_backup.sql")]),a._v("是你保存备份文件的名字。")]),a._v(" "),s("h3",{attrs:{id:"备份多个表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#备份多个表"}},[a._v("#")]),a._v(" 备份多个表")]),a._v(" "),s("p",[a._v("如果需要备份同一个数据库下的多个表，可以直接列出所有要备份的表名：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mysqldump "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" database_name table1 table2 "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" tables_backup.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"还原表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#还原表"}},[a._v("#")]),a._v(" 还原表")]),a._v(" "),s("p",[a._v("使用"),s("code",[a._v("mysql")]),a._v("命令将备份文件中的表导入到指定数据库中：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" database_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" table_backup.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("p",[a._v("或者直接在命令行中执行创建数据库并导入：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[a._v("mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"CREATE DATABASE IF NOT EXISTS database_name;"')]),a._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("&&")]),a._v(" mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-u")]),a._v(" username "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" database_name "),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("<")]),a._v(" table_backup.sql\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"custom-block note"},[s("p",{staticClass:"custom-block-title"},[a._v("笔记")]),a._v(" "),s("ul",[s("li",[a._v("在进行表的备份和还原时，请确保有足够的权限。")]),a._v(" "),s("li",[a._v("如果你在还原过程中遇到错误，可能是由于表已存在。在这种情况下，你可以手动删除现有的表（请谨慎操作），或者使用"),s("code",[a._v("--add-drop-table")]),a._v("选项重新生成备份文件，这样在还原时会自动删除存在的表。")]),a._v(" "),s("li",[a._v("对于大型表，考虑增加一些参数优化导出和导入过程，如使用"),s("code",[a._v("--quick")]),a._v("选项等。")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);